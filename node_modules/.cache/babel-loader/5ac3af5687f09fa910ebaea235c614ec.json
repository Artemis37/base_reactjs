{"ast":null,"code":"import apis from '../apis/apis';\nimport store from '../store/store';\nimport { setToken } from '../utils/security';\nimport history from '../history';\nimport { isLoading, isNotLoading } from '../store/reducer/loading';\nimport { setActions, setUserInfo } from '../store/reducer/user';\nconst userProcessor = {};\n\nuserProcessor.getByTruong = async () => {\n  const rs = await apis.User.GetAllTruongUser({});\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.getByKhoaThi = async () => {\n  const rs = await apis.User.GetAll({});\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.login = async data => {\n  const rs = await apis.User.Login({\n    method: 'post',\n    data,\n    auth: false\n  });\n\n  if (!rs.isSuccess) {\n    return rs;\n  }\n\n  setToken(rs.data.token);\n  const link = await userProcessor.getUserActions();\n  await userProcessor.getUserInfo();\n  history.push(!!history.location.state && history.location.state[0] !== '/login' ? history.location.state[0] : link);\n  store.dispatch(isNotLoading());\n  return rs;\n};\n\nuserProcessor.getUserInfo = async () => {\n  const rs = await apis.User.UserInfo({});\n  if (rs.isSuccess) store.dispatch(setUserInfo(rs.data));\n};\n\nuserProcessor.resetPassword = async id => {\n  const rs = await apis.User.ResetPassword({\n    param: `/${id}`,\n    method: 'post',\n    responseType: 'text'\n  });\n  return rs;\n};\n\nuserProcessor.getUserActions = async () => {\n  store.dispatch(isLoading());\n  const rs = await apis.User.Permission({});\n  if (rs.isSuccess) store.dispatch(setActions(rs.data));\n  store.dispatch(isNotLoading());\n  return '/';\n};\n\nuserProcessor.getByPermission = async code => {\n  const rs = await apis.User.GetByPermission({\n    param: `/${code}`\n  });\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.getAll = async () => {\n  const rs = await apis.User.GetAll({});\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.changePassword = async data => {\n  const rs = await apis.User.ChangePassword({\n    method: 'post',\n    responseType: 'text',\n    data\n  });\n  return rs;\n};\n\nuserProcessor.upsert = async data => {\n  let rs;\n\n  if (data.id) {\n    rs = await apis.User.Update({\n      method: 'post',\n      responseType: 'text',\n      data\n    });\n  } else {\n    rs = await apis.User.Create({\n      method: 'post',\n      responseType: 'text',\n      data\n    });\n  }\n\n  return rs;\n};\n\nuserProcessor.delete = async id => {\n  const rs = await apis.User.Delete({\n    method: 'post',\n    responseType: 'text',\n    param: `/${id}`\n  });\n  return rs;\n};\n\nexport default userProcessor;","map":{"version":3,"names":["apis","store","setToken","history","isLoading","isNotLoading","setActions","setUserInfo","userProcessor","getByTruong","rs","User","GetAllTruongUser","isSuccess","data","getByKhoaThi","GetAll","login","Login","method","auth","token","link","getUserActions","getUserInfo","push","location","state","dispatch","UserInfo","resetPassword","id","ResetPassword","param","responseType","Permission","getByPermission","code","GetByPermission","getAll","changePassword","ChangePassword","upsert","Update","Create","delete","Delete"],"sources":["C:/Users/DELL/Downloads/ClientApp/src/processor/userProcessor.js"],"sourcesContent":["import apis from '../apis/apis'\nimport store from '../store/store'\nimport { setToken } from '../utils/security'\nimport history from '../history'\nimport { isLoading, isNotLoading } from '../store/reducer/loading'\nimport { setActions, setUserInfo } from '../store/reducer/user'\n\nconst userProcessor = {}\nuserProcessor.getByTruong = async () => {\n  const rs = await apis.User.GetAllTruongUser({})\n  return rs.isSuccess ? rs.data : []\n}\nuserProcessor.getByKhoaThi = async () => {\n  const rs = await apis.User.GetAll({})\n  return rs.isSuccess ? rs.data : []\n}\nuserProcessor.login = async (data) => {\n  const rs = await apis.User.Login({\n    method: 'post',\n    data,\n    auth: false,\n  })\n  if (!rs.isSuccess) {\n    return rs\n  }\n  setToken(rs.data.token)\n  const link = await userProcessor.getUserActions()\n  await userProcessor.getUserInfo()\n  history.push(\n    !!history.location.state && history.location.state[0] !== '/login'\n      ? history.location.state[0]\n      : link,\n  )\n  store.dispatch(isNotLoading())\n  return rs\n}\n\nuserProcessor.getUserInfo = async () => {\n  const rs = await apis.User.UserInfo({})\n  if (rs.isSuccess) store.dispatch(setUserInfo(rs.data))\n}\n\nuserProcessor.resetPassword = async (id) => {\n  const rs = await apis.User.ResetPassword({\n    param: `/${id}`,\n    method: 'post',\n    responseType: 'text',\n  })\n  return rs\n}\n\nuserProcessor.getUserActions = async () => {\n  store.dispatch(isLoading())\n  const rs = await apis.User.Permission({})\n  if (rs.isSuccess) store.dispatch(setActions(rs.data))\n  store.dispatch(isNotLoading())\n  return '/'\n}\n\nuserProcessor.getByPermission = async (code) => {\n  const rs = await apis.User.GetByPermission({ param: `/${code}` })\n  return rs.isSuccess ? rs.data : []\n}\nuserProcessor.getAll = async () => {\n  const rs = await apis.User.GetAll({})\n  return rs.isSuccess ? rs.data : []\n}\n\nuserProcessor.changePassword = async (data) => {\n  const rs = await apis.User.ChangePassword({ method: 'post', responseType: 'text', data })\n  return rs\n}\n\nuserProcessor.upsert = async (data) => {\n  let rs\n  if (data.id) {\n    rs = await apis.User.Update({ method: 'post', responseType: 'text', data })\n  } else {\n    rs = await apis.User.Create({ method: 'post', responseType: 'text', data })\n  }\n  return rs\n}\n\nuserProcessor.delete = async (id) => {\n  const rs = await apis.User.Delete({ method: 'post', responseType: 'text', param: `/${id}` })\n  return rs\n}\n\nexport default userProcessor\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}