{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Downloads\\\\ClientApp\\\\src\\\\pages\\\\Permission.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable max-lines-per-function */\nimport { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Button } from 'primereact/button';\nimport { Toolbar } from 'primereact/toolbar';\nimport { Tree } from 'primereact/tree';\nimport { useSelector } from 'react-redux';\nimport UpsertPopup from '../components/form/UpsertPopup';\nimport permissionProcessor from '../processor/permissionProcessor';\nimport { convertToPermission, updateToPermission } from '../utils/convertToTree';\nimport icons from '../constant/icons';\nimport userProcessor from '../processor/userProcessor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Permission() {\n  _s();\n\n  const moduleName = 'chức năng';\n  const [oneData, setOneData] = useState({});\n  const [datas, setDatas] = useState([]);\n  const [visible, setVisible] = useState(false);\n  const toast = useSelector(store => store.notify.toast);\n  const confirm = useSelector(store => store.notify.confirm);\n  const listIcons = icons.map(item => {\n    return {\n      id: item,\n      name: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: item\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 30\n      }, this)\n    };\n  });\n\n  const toggle = () => setVisible(!visible);\n\n  const getDatas = async () => {\n    const rs = await permissionProcessor.getAll();\n    convertToPermission(rs);\n    setDatas(rs);\n  };\n\n  const init = () => {\n    getDatas();\n  };\n\n  useEffect(init, []);\n\n  const save = async data => {\n    const rs = await permissionProcessor.upsert(data);\n    toast({\n      type: rs.isSuccess ? 'success' : 'error',\n      message: rs.data\n    });\n    if (rs.isSuccess) toggle();\n    getDatas();\n    userProcessor.getUserActions();\n  };\n\n  const deleteOnClick = async id => {\n    const rs = await permissionProcessor.delete(id);\n    toast({\n      type: rs.isSuccess ? 'success' : 'error',\n      message: rs.data\n    });\n    getDatas();\n    userProcessor.getUserActions();\n  };\n\n  const header = !oneData.id ? `Thêm mới ${moduleName}` : `Chỉnh sửa ${moduleName}`;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(UpsertPopup, {\n      width: \"60%\",\n      visible: visible,\n      toggle: toggle,\n      header: header,\n      data: oneData,\n      onSave: save,\n      selectSearcher: {\n        icon: 'id'\n      },\n      fields: ['name', 'link', 'code', 'icon'],\n      maxLength: {\n        code: 30,\n        name: 50,\n        link: 30,\n        icon: 30\n      },\n      name: {\n        name: 'Tên',\n        link: 'Đường dẫn',\n        code: 'Mã',\n        icon: 'Icon'\n      },\n      options: {\n        icon: listIcons\n      },\n      types: {\n        icon: 'select'\n      },\n      disable: !oneData.id ? [] : ['code']\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card treetable-responsive\",\n      children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n        className: \"mb-4\",\n        right: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            icon: \"pi pi-plus\",\n            className: \"p-button-success mr-2\",\n            label: \"Th\\xEAm\",\n            onClick: () => {\n              setOneData({});\n              toggle();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            icon: \"pi pi-save\",\n            label: \"L\\u01B0u th\\u1EE9 t\\u1EF1 ch\\u1EE9c n\\u0103ng\",\n            onClick: () => {\n              updateToPermission(datas);\n              permissionProcessor.updateMany(datas);\n              getDatas();\n              userProcessor.getUserActions();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tree, {\n        value: datas,\n        dragdropScope: \"demo\",\n        onDragDrop: event => {\n          setDatas(event.value);\n        },\n        nodeTemplate: item => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-content-between align-items-center w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"m-0\",\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                icon: \"pi pi-plus\",\n                className: \"p-button-rounded p-button-success mr-2\",\n                onClick: () => {\n                  setOneData({\n                    parentId: item.id\n                  });\n                  toggle();\n                },\n                tooltip: \"Th\\xEAm ph\\u1EA7n t\\u1EED con\",\n                tooltipOptions: {\n                  position: 'top'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                icon: \"pi pi-pencil\",\n                className: \"p-button-rounded p-button-warning mr-2\",\n                onClick: () => {\n                  setOneData(item);\n                  toggle();\n                },\n                tooltip: \"S\\u1EEDa\",\n                tooltipOptions: {\n                  position: 'top'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                icon: \"pi pi-trash\",\n                className: \"p-button-rounded p-button-danger mr-2\",\n                onClick: () => {\n                  confirm({\n                    action: () => deleteOnClick(item.id),\n                    body: `Bạn có muốn xoá ${moduleName} này?`\n                  });\n                },\n                tooltip: \"Xo\\xE1\",\n                tooltipOptions: {\n                  position: 'top'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Permission, \"bYE9iJ5SxlRKpgGYTZU9YWpqzY8=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = Permission;\nexport default _c2 = withRouter(Permission);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Permission\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["useEffect","useState","withRouter","Button","Toolbar","Tree","useSelector","UpsertPopup","permissionProcessor","convertToPermission","updateToPermission","icons","userProcessor","Permission","moduleName","oneData","setOneData","datas","setDatas","visible","setVisible","toast","store","notify","confirm","listIcons","map","item","id","name","toggle","getDatas","rs","getAll","init","save","data","upsert","type","isSuccess","message","getUserActions","deleteOnClick","delete","header","icon","code","link","updateMany","event","value","parentId","position","action","body"],"sources":["C:/Users/DELL/Downloads/ClientApp/src/pages/Permission.js"],"sourcesContent":["/* eslint-disable max-lines-per-function */\nimport { useEffect, useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { Button } from 'primereact/button'\nimport { Toolbar } from 'primereact/toolbar'\nimport { Tree } from 'primereact/tree'\nimport { useSelector } from 'react-redux'\nimport UpsertPopup from '../components/form/UpsertPopup'\nimport permissionProcessor from '../processor/permissionProcessor'\nimport { convertToPermission, updateToPermission } from '../utils/convertToTree'\nimport icons from '../constant/icons'\nimport userProcessor from '../processor/userProcessor'\n\nfunction Permission() {\n  const moduleName = 'chức năng'\n  const [oneData, setOneData] = useState({})\n  const [datas, setDatas] = useState([])\n  const [visible, setVisible] = useState(false)\n  const toast = useSelector((store) => store.notify.toast)\n  const confirm = useSelector((store) => store.notify.confirm)\n  const listIcons = icons.map((item) => {\n    return { id: item, name: <i className={item} /> }\n  })\n  const toggle = () => setVisible(!visible)\n\n  const getDatas = async () => {\n    const rs = await permissionProcessor.getAll()\n    convertToPermission(rs)\n    setDatas(rs)\n  }\n  const init = () => {\n    getDatas()\n  }\n  useEffect(init, [])\n  const save = async (data) => {\n    const rs = await permissionProcessor.upsert(data)\n    toast({ type: rs.isSuccess ? 'success' : 'error', message: rs.data })\n    if (rs.isSuccess) toggle()\n    getDatas()\n    userProcessor.getUserActions()\n  }\n  const deleteOnClick = async (id) => {\n    const rs = await permissionProcessor.delete(id)\n    toast({ type: rs.isSuccess ? 'success' : 'error', message: rs.data })\n    getDatas()\n    userProcessor.getUserActions()\n  }\n\n  const header = !oneData.id ? `Thêm mới ${moduleName}` : `Chỉnh sửa ${moduleName}`\n\n  return (\n    <>\n      <UpsertPopup\n        width=\"60%\"\n        visible={visible}\n        toggle={toggle}\n        header={header}\n        data={oneData}\n        onSave={save}\n        selectSearcher={{ icon: 'id' }}\n        fields={['name', 'link', 'code', 'icon']}\n        maxLength={{ code: 30, name: 50, link: 30, icon: 30 }}\n        name={{\n          name: 'Tên',\n          link: 'Đường dẫn',\n          code: 'Mã',\n          icon: 'Icon',\n        }}\n        options={{ icon: listIcons }}\n        types={{ icon: 'select' }}\n        disable={!oneData.id ? [] : ['code']}\n      />\n      <div className=\"card treetable-responsive\">\n        <Toolbar\n          className=\"mb-4\"\n          right={\n            <div className=\"flex\">\n              <Button\n                icon=\"pi pi-plus\"\n                className=\"p-button-success mr-2\"\n                label=\"Thêm\"\n                onClick={() => {\n                  setOneData({})\n                  toggle()\n                }}\n              />\n              <Button\n                icon=\"pi pi-save\"\n                label=\"Lưu thứ tự chức năng\"\n                onClick={() => {\n                  updateToPermission(datas)\n                  permissionProcessor.updateMany(datas)\n                  getDatas()\n                  userProcessor.getUserActions()\n                }}\n              />\n            </div>\n          }\n        />\n        <Tree\n          value={datas}\n          dragdropScope=\"demo\"\n          onDragDrop={(event) => {\n            setDatas(event.value)\n          }}\n          nodeTemplate={(item) => {\n            return (\n              <div className=\"flex justify-content-between align-items-center w-full\">\n                <p className=\"m-0\">{item.name}</p>\n                <div className=\"flex align-items-center\">\n                  <Button\n                    icon=\"pi pi-plus\"\n                    className=\"p-button-rounded p-button-success mr-2\"\n                    onClick={() => {\n                      setOneData({ parentId: item.id })\n                      toggle()\n                    }}\n                    tooltip=\"Thêm phần tử con\"\n                    tooltipOptions={{ position: 'top' }}\n                  />\n                  <Button\n                    icon=\"pi pi-pencil\"\n                    className=\"p-button-rounded p-button-warning mr-2\"\n                    onClick={() => {\n                      setOneData(item)\n                      toggle()\n                    }}\n                    tooltip=\"Sửa\"\n                    tooltipOptions={{ position: 'top' }}\n                  />\n                  <Button\n                    icon=\"pi pi-trash\"\n                    className=\"p-button-rounded p-button-danger mr-2\"\n                    onClick={() => {\n                      confirm({\n                        action: () => deleteOnClick(item.id),\n                        body: `Bạn có muốn xoá ${moduleName} này?`,\n                      })\n                    }}\n                    tooltip=\"Xoá\"\n                    tooltipOptions={{ position: 'top' }}\n                  />\n                </div>\n              </div>\n            )\n          }}\n        />\n      </div>\n    </>\n  )\n}\n\nexport default withRouter(Permission)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}