{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Downloads\\\\ClientApp\\\\src\\\\components\\\\form\\\\RoleTree.js\",\n    _s = $RefreshSig$();\n\nimport { Tree } from 'primereact/tree';\nimport { Button } from 'primereact/button';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { convertToPermission, convertToTree } from '../../utils/convertToTree';\nimport Modal from '../popup/Modal';\nimport roleProcessor from '../../processor/roleProcessor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst RoleTree = props => {\n  _s();\n\n  const permission = useSelector(state => state.user.actions);\n  const {\n    onSave,\n    id\n  } = props;\n  const [permissions, setPermissions] = useState([]);\n  const [visible, setVisible] = useState(false);\n  const [selected, setSelected] = useState([]);\n\n  const toggle = () => setVisible(!visible);\n\n  const getPermissions = async () => {\n    const data = [...permission.map(item => {\n      return { ...item\n      };\n    })];\n    const tree = data.filter(item => !item.parentId).sort((a, b) => a.order - b.order);\n    convertToTree(data, tree);\n    convertToPermission(data);\n    setPermissions(tree);\n  };\n\n  const getSelected = async () => {\n    const rs = await roleProcessor.rolePermission(id);\n    const selectedKeys = {};\n    rs.forEach(i => {\n      selectedKeys[i] = {\n        checked: true\n      };\n    });\n    setSelected(selectedKeys);\n  };\n\n  useEffect(() => {\n    getPermissions();\n  }, [permission]);\n  useEffect(() => {\n    if (id) {\n      getSelected();\n    }\n  }, [id]);\n  const header = 'Phân quyền';\n\n  const footer = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-content-end w-full pt-2\",\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      label: \"Hu\\u1EF7\",\n      className: \"p-button-secondary mr-2\",\n      onClick: () => {\n        if (toggle) toggle();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => {\n        if (toggle) toggle();\n\n        if (onSave) {\n          onSave(id, Object.keys(selected).map(item => parseInt(item, 10)));\n        }\n      },\n      label: \"L\\u01B0u\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      visible: visible,\n      toggle: toggle,\n      header: header,\n      footer: footer,\n      width: \"50%\",\n      children: /*#__PURE__*/_jsxDEV(Tree, {\n        value: permissions,\n        selectionMode: \"checkbox\",\n        selectionKeys: selected,\n        onSelectionChange: e => {\n          setSelected(e.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      icon: \"pi pi-sitemap\",\n      className: \"p-button-rounded p-button-success mr-2\",\n      onClick: toggle,\n      tooltip: \"Ph\\xE2n quy\\u1EC1n\",\n      tooltipOptions: {\n        position: 'top'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(RoleTree, \"iwru2Lash3kv3FxEu2pdwn+b64c=\", false, function () {\n  return [useSelector];\n});\n\n_c = RoleTree;\nexport default RoleTree;\n\nvar _c;\n\n$RefreshReg$(_c, \"RoleTree\");","map":{"version":3,"names":["Tree","Button","useEffect","useState","useSelector","convertToPermission","convertToTree","Modal","roleProcessor","RoleTree","props","permission","state","user","actions","onSave","id","permissions","setPermissions","visible","setVisible","selected","setSelected","toggle","getPermissions","data","map","item","tree","filter","parentId","sort","a","b","order","getSelected","rs","rolePermission","selectedKeys","forEach","i","checked","header","footer","Object","keys","parseInt","e","value","position"],"sources":["C:/Users/DELL/Downloads/ClientApp/src/components/form/RoleTree.js"],"sourcesContent":["import { Tree } from 'primereact/tree'\nimport { Button } from 'primereact/button'\nimport { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { convertToPermission, convertToTree } from '../../utils/convertToTree'\nimport Modal from '../popup/Modal'\nimport roleProcessor from '../../processor/roleProcessor'\n\nconst RoleTree = (props) => {\n  const permission = useSelector((state) => state.user.actions)\n  const { onSave, id } = props\n\n  const [permissions, setPermissions] = useState([])\n  const [visible, setVisible] = useState(false)\n  const [selected, setSelected] = useState([])\n\n  const toggle = () => setVisible(!visible)\n  const getPermissions = async () => {\n    const data = [\n      ...permission.map((item) => {\n        return { ...item }\n      }),\n    ]\n    const tree = data.filter((item) => !item.parentId).sort((a, b) => a.order - b.order)\n    convertToTree(data, tree)\n    convertToPermission(data)\n    setPermissions(tree)\n  }\n  const getSelected = async () => {\n    const rs = await roleProcessor.rolePermission(id)\n    const selectedKeys = {}\n    rs.forEach((i) => {\n      selectedKeys[i] = { checked: true }\n    })\n    setSelected(selectedKeys)\n  }\n\n  useEffect(() => {\n    getPermissions()\n  }, [permission])\n  useEffect(() => {\n    if (id) {\n      getSelected()\n    }\n  }, [id])\n\n  const header = 'Phân quyền'\n  const footer = () => (\n    <div className=\"flex justify-content-end w-full pt-2\">\n      <Button\n        label=\"Huỷ\"\n        className=\"p-button-secondary mr-2\"\n        onClick={() => {\n          if (toggle) toggle()\n        }}\n      />\n      <Button\n        onClick={() => {\n          if (toggle) toggle()\n          if (onSave) {\n            onSave(\n              id,\n              Object.keys(selected).map((item) => parseInt(item, 10)),\n            )\n          }\n        }}\n        label=\"Lưu\"\n      />\n    </div>\n  )\n  return (\n    <>\n      <Modal visible={visible} toggle={toggle} header={header} footer={footer} width=\"50%\">\n        <Tree\n          value={permissions}\n          selectionMode=\"checkbox\"\n          selectionKeys={selected}\n          onSelectionChange={(e) => {\n            setSelected(e.value)\n          }}\n        />\n      </Modal>\n      <Button\n        icon=\"pi pi-sitemap\"\n        className=\"p-button-rounded p-button-success mr-2\"\n        onClick={toggle}\n        tooltip=\"Phân quyền\"\n        tooltipOptions={{ position: 'top' }}\n      />\n    </>\n  )\n}\n\nexport default RoleTree\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}