{"ast":null,"code":"import apis from '../apis/apis';\nimport store from '../store/store';\nimport { setToken } from '../utils/security';\nimport history from '../history';\nimport { isLoading, isNotLoading } from '../store/reducer/loading';\nconst userProcessor = {};\n\nuserProcessor.getByTruong = async () => {\n  const rs = await apis.User.GetAllTruongUser({});\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.getByKhoaThi = async () => {\n  const rs = await apis.User.GetAll({});\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.login = async data => {\n  const rs = await apis.User.Login({\n    method: 'post',\n    data,\n    auth: false\n  });\n\n  if (!rs.isSuccess) {\n    return rs;\n  }\n\n  setToken(rs.data.token);\n  const link = await userProcessor.getUserActions();\n  await userProcessor.getUserInfo();\n  history.push(!!history.location.state && history.location.state[0] !== '/login' ? history.location.state[0] : link);\n  store.dispatch(isNotLoading());\n  return rs;\n};\n\nuserProcessor.getUserInfo = async () => {\n  const rs = await apis.User.UserInfo({});\n  if (rs.isSuccess) store.dispatch(setUserInfo(rs.data));\n};\n\nuserProcessor.resetPassword = async id => {\n  const rs = await apis.User.ResetPassword({\n    param: `/${id}`,\n    method: 'post',\n    responseType: 'text'\n  });\n  return rs;\n};\n\nuserProcessor.getUserActions = async () => {\n  store.dispatch(isLoading());\n  const rs = await apis.User.Permission({});\n  if (rs.isSuccess) store.dispatch(setActions(rs.data));\n  store.dispatch(isNotLoading());\n  return '/';\n};\n\nuserProcessor.getByPermission = async code => {\n  const rs = await apis.User.GetByPermission({\n    param: `/${code}`\n  });\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.getAll = async () => {\n  const rs = await apis.User.GetAll({});\n  return rs.isSuccess ? rs.data : [];\n};\n\nuserProcessor.changePassword = async data => {\n  const rs = await apis.User.ChangePassword({\n    method: 'post',\n    responseType: 'text',\n    data\n  });\n  return rs;\n};\n\nuserProcessor.upsert = async data => {\n  let rs;\n\n  if (data.id) {\n    rs = await apis.User.Update({\n      method: 'post',\n      responseType: 'text',\n      data\n    });\n  } else {\n    rs = await apis.User.Create({\n      method: 'post',\n      responseType: 'text',\n      data\n    });\n  }\n\n  return rs;\n};\n\nuserProcessor.delete = async id => {\n  const rs = await apis.User.Delete({\n    method: 'post',\n    responseType: 'text',\n    param: `/${id}`\n  });\n  return rs;\n};\n\nexport default userProcessor;","map":{"version":3,"names":["apis","store","setToken","history","isLoading","isNotLoading","userProcessor","getByTruong","rs","User","GetAllTruongUser","isSuccess","data","getByKhoaThi","GetAll","login","Login","method","auth","token","link","getUserActions","getUserInfo","push","location","state","dispatch","UserInfo","setUserInfo","resetPassword","id","ResetPassword","param","responseType","Permission","setActions","getByPermission","code","GetByPermission","getAll","changePassword","ChangePassword","upsert","Update","Create","delete","Delete"],"sources":["C:/Users/DELL/Downloads/ClientApp/src/processor/userProcessor.js"],"sourcesContent":["import apis from '../apis/apis'\nimport store from '../store/store'\nimport { setToken } from '../utils/security'\nimport history from '../history'\nimport { isLoading, isNotLoading } from '../store/reducer/loading'\n\nconst userProcessor = {}\nuserProcessor.getByTruong = async () => {\n  const rs = await apis.User.GetAllTruongUser({})\n  return rs.isSuccess ? rs.data : []\n}\nuserProcessor.getByKhoaThi = async () => {\n  const rs = await apis.User.GetAll({})\n  return rs.isSuccess ? rs.data : []\n}\nuserProcessor.login = async (data) => {\n  const rs = await apis.User.Login({\n    method: 'post',\n    data,\n    auth: false,\n  })\n  if (!rs.isSuccess) {\n    return rs\n  }\n  setToken(rs.data.token)\n  const link = await userProcessor.getUserActions()\n  await userProcessor.getUserInfo()\n  history.push(\n    !!history.location.state && history.location.state[0] !== '/login'\n      ? history.location.state[0]\n      : link,\n  )\n  store.dispatch(isNotLoading())\n  return rs\n}\n\nuserProcessor.getUserInfo = async () => {\n  const rs = await apis.User.UserInfo({})\n  if (rs.isSuccess) store.dispatch(setUserInfo(rs.data))\n}\n\nuserProcessor.resetPassword = async (id) => {\n  const rs = await apis.User.ResetPassword({\n    param: `/${id}`,\n    method: 'post',\n    responseType: 'text',\n  })\n  return rs\n}\n\nuserProcessor.getUserActions = async () => {\n  store.dispatch(isLoading())\n  const rs = await apis.User.Permission({})\n  if (rs.isSuccess) store.dispatch(setActions(rs.data))\n  store.dispatch(isNotLoading())\n  return '/'\n}\n\nuserProcessor.getByPermission = async (code) => {\n  const rs = await apis.User.GetByPermission({ param: `/${code}` })\n  return rs.isSuccess ? rs.data : []\n}\nuserProcessor.getAll = async () => {\n  const rs = await apis.User.GetAll({})\n  return rs.isSuccess ? rs.data : []\n}\n\nuserProcessor.changePassword = async (data) => {\n  const rs = await apis.User.ChangePassword({ method: 'post', responseType: 'text', data })\n  return rs\n}\n\nuserProcessor.upsert = async (data) => {\n  let rs\n  if (data.id) {\n    rs = await apis.User.Update({ method: 'post', responseType: 'text', data })\n  } else {\n    rs = await apis.User.Create({ method: 'post', responseType: 'text', data })\n  }\n  return rs\n}\n\nuserProcessor.delete = async (id) => {\n  const rs = await apis.User.Delete({ method: 'post', responseType: 'text', param: `/${id}` })\n  return rs\n}\n\nexport default userProcessor\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}